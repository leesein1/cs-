# 🧩 정규화 vs 비정규화

---

## 📌 이 문서는?

데이터베이스를 설계할 때 **중복을 줄이고, 데이터의 일관성과 무결성을 유지하기 위해** 사용하는 방법이 정규화이다.  
반대로 성능을 위해 일부러 중복을 허용하는 것이 비정규화다.  
이 문서에서는 **1NF ~ 3NF 및 BCNF까지의 정규화 단계와 개념**, 그리고 **비정규화의 의도적 사용**을 설명한다.

---

## ✅ 정규화란?

> **중복을 제거하고, 데이터를 구조화해 이상(Anomaly)을 방지**하기 위한 설계 기법

- 데이터를 작은 단위의 테이블로 분해
- 각 테이블은 명확한 목적과 역할을 가짐
- 삽입/수정/삭제 시 데이터 일관성 유지

---

## 🔢 정규화 단계 요약

| 단계 | 이름 | 요건 | 설명 |
|------|------|------|------|
| 1NF | 제1정규형 | 원자값만 존재해야 함 | 컬럼에 배열, 리스트처럼 여러 값이 들어가면 안 됨 |
| 2NF | 제2정규형 | 부분 함수 종속 제거 | 복합키의 일부분에만 의존하는 컬럼 제거 |
| 3NF | 제3정규형 | 이행적 함수 종속 제거 | 기본키가 아닌 컬럼이 다른 컬럼에 종속된 경우 제거 |
| BCNF | 보이스-코드 정규형 | 결정자가 후보키여야 함 | 3NF보다 더 엄격한 조건, 모든 결정자가 후보키일 때 만족 |


1NF : 한칸에 한 데이터만
2NF : FK를 활용해서 다른 테이블로 관리 ( Partial Dependeny제거 한 테이블 )
3NF : 복합키에도 안 엮인 다른 컬럼의 종속 컬럼을 제거한 경우 (비-후보키 → 비-후보키 종속 제거)
BCNF: 모든 결정자는 후보 키여야한다는 규칙

---

## 🎯 정규화 예시 (1NF → BCNF)

### 🔸 예: 주민센터 체육센터 DB

| 회원번호 | 회원명 | 프로그램    | 가격         |
| ---- | --- | ------- | ---------- |
| 101  | 강호동 | 헬스      | 5000       |
| 102  | 이세인 | 스쿼시, 헬스 | 6000, 5000 |


- 1NF : 스쿼시, 헬스 와 같이 위반

**1NF 준수 ver**
**2NF 위반**
| 회원번호 | 회원명 | 프로그램 | 가격   |
| ---- | --- | ---- | ---- |
| 101  | 강호동 | 헬스   | 5000 |
| 102  | 이세인 | 스쿼시  | 6000 |
| 102  | 이세인 | 헬스   | 5000 |

**2NF 준수**
| 회원번호 | 회원명 |
| ---- | --- |
| 101  | 강호동 |
| 102  | 이세인 |

| 회원번호 | 프로그램 | 가격   |
| ---- | ---- | ---- |
| 101  | 헬스   | 5000 |
| 102  | 스쿼시  | 6000 |
| 102  | 헬스   | 5000 |

**3NF 위반**
| 프로그램 | 가격   | 강사명   |
| ---- | ---- | ----- |
| 헬스   | 5000 | 김트레이너 |
| 스쿼시  | 6000 | 박스쿼시  |

**3NF 준수**
| 프로그램 | 가격   | 강사ID |
| ---- | ---- | ---- |
| 헬스   | 5000 | T01  |
| 스쿼시  | 6000 | T02  |

| 강사ID | 강사명   |
| ---- | ----- |
| T01  | 김트레이너 |
| T02  | 박스쿼시  |


**BCNF 만족을 위해서는?**
> 모든 결정자를 후보키로 변경 (강사ID를 사용)
| 강사ID | 강사명   |
| ---- | ----- |
| T01  | 김트레이너 |
| T02  | 박스쿼시  |

| 강사ID | 프로그램 |
| ---- | ---- |
| T01  | 헬스   |
| T01  | PT   |

---

## 🚫 비정규화란?

> 성능 향상이나 개발 편의를 위해 **의도적으로 정규화를 깨는 행위**

- 조인을 줄이기 위해 일부 중복 허용
- 계산 결과 미리 저장 (예: 총합, 카운트 등)
- 조회 성능 개선 목적

---

## 🧠 최종 요약

```
정규화는 중복을 줄이고 데이터 무결성을 유지하기 위한 구조화 기법이다.  
1NF~3NF, BCNF를 통해 점진적으로 테이블을 쪼개고 종속성을 제거한다.  
BCNF는 모든 결정자가 후보키일 것을 요구하는 더 엄격한 정규형이다.  
비정규화는 성능 향상을 위해 정규화 규칙을 일부러 완화하는 과정이다.
```

> 비정규화 예시 : 게시글 조회수, 상품별 누적 판매량을 미리 저장 (계산 대신 캐싱)
