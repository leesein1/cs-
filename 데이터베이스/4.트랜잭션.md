
# 💾 트랜잭션 & ACID

---

## ✅ 트랜잭션(Transaction)이란?

- 데이터베이스의 상태를 변화시키기 위한 **작업의 논리적 단위**
- **모든 작업이 전부 성공하거나, 전부 실패해야 한다 (All or Nothing)**
- 예: 은행 송금

```text
1. A 계좌에서 10만원 인출
2. B 계좌에 10만원 입금
```

→ 이 둘이 하나의 트랜잭션으로 묶여야 함  
→ 하나라도 실패 시 전체 롤백 필요

---

## ✅ 트랜잭션의 4가지 특성 (ACID)

| 항목 | 설명 |
|------|------|
| Atomicity (원자성) | 트랜잭션은 모두 수행되거나 전혀 수행되지 않아야 함 |
| Consistency (일관성) | 트랜잭션 수행 후에도 DB는 일관된 상태를 유지해야 함 |
| Isolation (격리성) | 동시에 수행되는 트랜잭션은 서로 간섭하면 안 됨 |
| Durability (지속성) | 트랜잭션 완료 후 결과는 영구적으로 반영되어야 함 |

---

## ✅ 트랜잭션 관련 명령어 (SQL 기준)

```sql
BEGIN TRAN;   -- 트랜잭션 시작
UPDATE ...;   -- 작업 수행
COMMIT;       -- 성공 시 반영
ROLLBACK;     -- 실패 시 원상 복구
```

---

## ✅ 실무에서의 예시

### 📌 예1. 주문 처리 트랜잭션

```text
1. 주문 테이블에 주문 INSERT
2. 재고 테이블에서 수량 감소
3. 포인트 테이블에서 포인트 차감
→ 셋 중 하나라도 실패하면 전체 ROLLBACK
```

---

## 🧠 요약

- 트랜잭션은 DB 정합성을 위한 최소 단위
- ACID는 안정적인 DB 운용을 위한 4대 특성
- 실무에서는 오류 발생 시 ROLLBACK 처리가 중요
