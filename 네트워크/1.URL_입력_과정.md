
# 🔍 브라우저로 google을 들어가면?

> 사용자가 브라우저 주소창에 `google.com`을 입력하고 엔터를 누르면  
> 내부적으로 어떤 일이 일어나는지를 순차적으로 정리한 문서로 영어 주소가 어떻게 목적 서버에 도착하고 우리가 원하는
> 서버가 보여지는지에 대하여 공부하기 위한 문서입니다.

---

## ✅ 1. DNS 조회

브라우저는 먼저 입력한 **도메인 주소**(`google.com`)를 IP 주소로 변환해야 합니다.  
이 과정을 **DNS (Domain Name System)** 조회라고 하며, 아래와 같은 단계로 진행됩니다:

---

### 🔍 DNS 조회 순서

1. **로컬 캐시**  
   - 브라우저 내부 DNS 캐시 (가장 빠름)  
   - 이전 접속 기록이 있을 경우 즉시 IP 반환  

2. **운영체제(OS) 캐시**  
   - 브라우저에 없으면 OS 레벨의 DNS 캐시에 검색 주소의 IP가 캐싱되어있는지 확인 (`ipconfig /displaydns` 등)

3. **라우터 / 공유기 캐시**  
   - 가정용 공유기에서도 DNS 응답 결과를 일시 저장하는 경우 있음  

4. **ISP DNS 서버**  
   - 인터넷 제공업체의 DNS 서버에 질의  

5. **루트 DNS 서버**  
   - 최상위 DNS. ".com", ".net" 등 TLD 서버 위치를 알려줌  

6. **TLD (Top Level Domain) 서버**  
   - com/net/org 등 상위 도메인의 권한 DNS 위치 반환  

7. **권한 DNS 서버**  
   - 실제 `google.com`의 IP 주소를 최종 반환


---

## ✅ 2. TCP 연결 (3-Way Handshaking)

상위 단계에서 DNS를 활용, 접속(google.com)의 IP 주소를 받아왔다면,  
내 컴퓨터 IP -> google IP로 데이터 송수신 요청을 하게 되는데, 이때 TCP연결 하는 방식이 바로 **3-way 핸드셰이크**이다.

### 3-way 핸드셰이크 동작
| 단계  | 통신 내용                   | 의미                   |
| --- | ----------------------- | -------------------- |
| 1️⃣ | 클라이언트 → 서버: `SYN`       | "연결 요청합니다~"           |
| 2️⃣ | 서버 → 클라이언트: `SYN + ACK` | "좋아요, 나도 연결 OK입니다!"   |
| 3️⃣ | 클라이언트 → 서버: `ACK`       | "좋습니다, 연결 시작합시다!" |


---

## ✅ 3. HTTP 요청 전송

- TCP 연결 후 브라우저는 서버에 HTTP 요청을 보냄

```
GET / HTTP/1.1
Host: www.google.com
User-Agent: ...
```

- 서버는 요청을 받고 HTML, CSS, JS 등의 리소스를 HTTP 응답으로 전달

---

## ✅ 4. 응답 수신 및 렌더링

- 브라우저는 HTML 파싱 → DOM 생성
- CSS 파싱 → CSSOM 생성
- JS 실행 (필요 시) → DOM 조작
- 최종적으로 화면에 렌더링됨

---

## ✅ 5. 이후 처리

- 추가 리소스 요청 (이미지, JS, API 등)
- 캐싱, 쿠키 저장 등 후처리 진행
- 보안 연결 시 HTTPS로 TLS 핸드셰이크 포함됨

---

## 🧠 요약 플로우

```text
[1] 브라우저 주소창에 URL 입력
        ↓
[2] DNS 조회 (도메인 → IP 변환)
        ↓
[3] TCP 연결 수립 (3-Way Handshaking)
        ↓
[4] HTTP 요청 전송 → HTTP 응답 수신
        ↓
[5] 브라우저가 HTML 파싱 → DOM 트리 생성
        ↓
[6] CSS 파싱 → CSSOM 생성
        ↓
[7] JS 실행 (필요 시 DOM 조작)
        ↓
[8] 최종적으로 화면에 렌더링
```