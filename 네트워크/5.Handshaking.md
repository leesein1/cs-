# 🤝 3-Way / 4-Way Handshaking

---

우리가 웹사이트에 접속하거나 API 요청을 보낼 때,  
브라우저와 서버는 단순히 "보내고 받는" 것이 아니라 **서로 연결을 확립하고 끊는 과정**을 거친다.  
이 문서는 바로 그 연결/종료 과정인 **TCP의 3-way 핸드셰이킹**과 **4-way 핸드셰이킹** 방법 입니다.   
실제 네트워크 통신의 가장 처음과 마지막을 담당하는 항목 입니다.

---

## ✅ 3-Way Handshaking (연결 확립)

TCP에서 **연결을 시작할 때** 사용하는 절차로,  
클라이언트와 서버가 **신뢰성 있는 연결을 맺기 위해** 3단계를 거친다.

### 📶 절차

1. **SYN**: 클라이언트 → 서버  
   연결 요청 (`SYN` 플래그 전송)
2. **SYN-ACK**: 서버 → 클라이언트  
   요청 수락 + 서버도 연결 요청
3. **ACK**: 클라이언트 → 서버  
   수락 응답 → 연결 완료

> 즉, SYN → SYN-ACK → ACK 순으로 총 3번의 패킷 교환

---

## ✅ 4-Way Handshaking (연결 종료)

TCP에서 **연결을 종료할 때**는  
서로 독립적으로 연결을 끊기 때문에 4단계가 필요하다.

### 📶 절차

1. **FIN**: 클라이언트 → 서버  
   "나 데이터 다 보냈어, 이제 종료할래"
2. **ACK**: 서버 → 클라이언트  
   "알겠어, 아직 난 좀 남았어"
3. **FIN**: 서버 → 클라이언트  
   "이제 나도 끝!"
4. **ACK**: 클라이언트 → 서버  
   "오케이, 완전히 종료"

---

## 🧠 최종 요약

```
3-Way Handshake는 TCP 연결을 확립하기 위한 과정,  
클라이언트 -> 서버 ( 연결 요청 )
서버 -> 클라이언트 ( 연결 수락 )
클라이언트 -> 서버 ( 실제 연결 )

4-Way Handshake는 TCP 연결을 종료하기 위한 절차이다.
클라이언트 -> 서버 ( 연결 종료 요청 )
서버 -> 클라이언트 ( 잔존 메시지 전달 )
서버 -> 클라이언트 ( 연결 종료 수락 )
클라이언트 -> 서버 ( 연결 종료 완료 )

각각 3단계, 4단계의 패킷 교환을 통해 신뢰성과 순서를 보장한다.
```

이 과정을 통해 TCP는 **연결 중심, 신뢰성 있는 통신**을 보장한다.