# π¤ 3-Way / 4-Way Handshaking

---

μ°λ¦¬κ°€ μ›Ήμ‚¬μ΄νΈμ— μ ‘μ†ν•κ±°λ‚ API μ”μ²­μ„ λ³΄λ‚Ό λ•,  
λΈλΌμ°μ €μ™€ μ„λ²„λ” λ‹¨μν "λ³΄λ‚΄κ³  λ°›λ”" κ²ƒμ΄ μ•„λ‹λΌ **μ„λ΅ μ—°κ²°μ„ ν™•λ¦½ν•κ³  λλ” κ³Όμ •**μ„ κ±°μΉλ‹¤.  
μ΄ λ¬Έμ„λ” λ°”λ΅ κ·Έ μ—°κ²°/μΆ…λ£ κ³Όμ •μΈ **TCPμ 3-way ν•Έλ“μ…°μ΄ν‚Ή**κ³Ό **4-way ν•Έλ“μ…°μ΄ν‚Ή** λ°©λ²• μ…λ‹λ‹¤.   
μ‹¤μ  λ„¤νΈμ›ν¬ ν†µμ‹ μ κ°€μ¥ μ²μκ³Ό λ§μ§€λ§‰μ„ λ‹΄λ‹Ήν•λ” ν•­λ© μ…λ‹λ‹¤.

---

## β… 3-Way Handshaking (μ—°κ²° ν™•λ¦½)

TCPμ—μ„ **μ—°κ²°μ„ μ‹μ‘ν•  λ•** μ‚¬μ©ν•λ” μ μ°¨λ΅,  
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ **μ‹ λΆ°μ„± μλ” μ—°κ²°μ„ λ§ΊκΈ° μ„ν•΄** 3λ‹¨κ³„λ¥Ό κ±°μΉλ‹¤.

### π“¶ μ μ°¨

1. **SYN**: ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„  
   μ—°κ²° μ”μ²­ (`SYN` ν”λκ·Έ μ „μ†΅)
2. **SYN-ACK**: μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ  
   μ”μ²­ μλ½ + μ„λ²„λ„ μ—°κ²° μ”μ²­
3. **ACK**: ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„  
   μλ½ μ‘λ‹µ β†’ μ—°κ²° μ™„λ£

> μ¦‰, SYN β†’ SYN-ACK β†’ ACK μμΌλ΅ μ΄ 3λ²μ ν¨ν‚· κµν™

---

## β… 4-Way Handshaking (μ—°κ²° μΆ…λ£)

TCPμ—μ„ **μ—°κ²°μ„ μΆ…λ£ν•  λ•**λ”  
μ„λ΅ λ…λ¦½μ μΌλ΅ μ—°κ²°μ„ λκΈ° λ•λ¬Έμ— 4λ‹¨κ³„κ°€ ν•„μ”ν•λ‹¤.

### π“¶ μ μ°¨

1. **FIN**: ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„  
   "λ‚ λ°μ΄ν„° λ‹¤ λ³΄λƒμ–΄, μ΄μ  μΆ…λ£ν• λ"
2. **ACK**: μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ  
   "μ•κ² μ–΄, μ•„μ§ λ‚ μΆ€ λ‚¨μ•μ–΄"
3. **FIN**: μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ  
   "μ΄μ  λ‚λ„ λ!"
4. **ACK**: ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„  
   "μ¤μΌ€μ΄, μ™„μ „ν μΆ…λ£"

---

## π§  μµμΆ… μ”μ•½

```
3-Way Handshakeλ” TCP μ—°κ²°μ„ ν™•λ¦½ν•κΈ° μ„ν• κ³Όμ •,  
ν΄λΌμ΄μ–ΈνΈ -> μ„λ²„ ( μ—°κ²° μ”μ²­ )
μ„λ²„ -> ν΄λΌμ΄μ–ΈνΈ ( μ—°κ²° μλ½ )
ν΄λΌμ΄μ–ΈνΈ -> μ„λ²„ ( μ‹¤μ  μ—°κ²° )

4-Way Handshakeλ” TCP μ—°κ²°μ„ μΆ…λ£ν•κΈ° μ„ν• μ μ°¨μ΄λ‹¤.
ν΄λΌμ΄μ–ΈνΈ -> μ„λ²„ ( μ—°κ²° μΆ…λ£ μ”μ²­ )
μ„λ²„ -> ν΄λΌμ΄μ–ΈνΈ ( μ”μ΅΄ λ©”μ‹μ§€ μ „λ‹¬ )
μ„λ²„ -> ν΄λΌμ΄μ–ΈνΈ ( μ—°κ²° μΆ…λ£ μλ½ )
ν΄λΌμ΄μ–ΈνΈ -> μ„λ²„ ( μ—°κ²° μΆ…λ£ μ™„λ£ )

κ°κ° 3λ‹¨κ³„, 4λ‹¨κ³„μ ν¨ν‚· κµν™μ„ ν†µν•΄ μ‹ λΆ°μ„±κ³Ό μμ„λ¥Ό λ³΄μ¥ν•λ‹¤.
```

μ΄ κ³Όμ •μ„ ν†µν•΄ TCPλ” **μ—°κ²° μ¤‘μ‹¬, μ‹ λΆ°μ„± μλ” ν†µμ‹ **μ„ λ³΄μ¥ν•λ‹¤.